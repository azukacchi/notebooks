
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>[READ THIS] Before you start &#8212; Azka&#39;s Notebooks</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/Commission-minumtehtarik.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Azka's Notebooks</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Welcome to your Jupyter Book
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="markdown.html">
   Markdown Files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="notebooks.html">
   Content with notebooks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="markdown-notebooks.html">
   Notebooks with MyST Markdown
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="mymarkdownfile.html">
   Here’s my sample title
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="taxi.html">
   <font color="red">
    [READ THIS] Before you start
   </font>
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/taxi_source.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/azukacchi/notebooks"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/azukacchi/notebooks/main?urlpath=tree/taxi_source.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   <font color="red">
    [READ THIS] Before you start
   </font>
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#warning">
     Warning:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-we-ll-be-doing">
     What we’ll be doing:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#expectations">
     Expectations:
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   Introduction
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-1-import-the-following-library">
     Step 1: Import the following library
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-2-visit-the-api-website">
     Step 2: Visit the API website
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-3-click-on-try-it-out">
     Step 3: Click on “Try it out”
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-4-add-a-date-into-the-text-box-containing-time">
     Step 4: Add a date into the text box containing time
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-5-test-with-one-api-call-first-with-requests">
     Step 5: Test with one API call first with requests
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#this-is-the-expected-output-of-the-api-call-if-you-did-it-correctly">
       This is the expected output of the API call if you did it correctly
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-6-turn-the-json-response-to-a-dataframe">
     Step 6: Turn the JSON response to a DataFrame
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-7-get-the-json-s-features-only">
     Step 7: Get the JSON’s “features” only
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-8-dissect-the-api-call-to-get-a-pattern">
     Step 8: Dissect the API call to get a pattern
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-9">
     Step 9:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-10-generate-a-list-of-datetime-in-proper-format-for-api">
     Step 10: Generate a list of datetime in proper format for API
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-11-make-your-api-calls-for-the-entire-duration-takes-1-2-hours">
     Step 11: Make your API calls for the entire duration (takes 1-2 hours)
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-12-create-a-new-column-time-in-the-new-dataframe">
     Step 12: Create a new column “time” in the new DataFrame
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-13-export-your-dataframe-as-csv">
     Step 13: Export your DataFrame as CSV
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-s-next">
     What’s next?
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1><font color = "red">[READ THIS] Before you start</font></h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   <font color="red">
    [READ THIS] Before you start
   </font>
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#warning">
     Warning:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-we-ll-be-doing">
     What we’ll be doing:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#expectations">
     Expectations:
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   Introduction
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-1-import-the-following-library">
     Step 1: Import the following library
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-2-visit-the-api-website">
     Step 2: Visit the API website
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-3-click-on-try-it-out">
     Step 3: Click on “Try it out”
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-4-add-a-date-into-the-text-box-containing-time">
     Step 4: Add a date into the text box containing time
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-5-test-with-one-api-call-first-with-requests">
     Step 5: Test with one API call first with requests
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#this-is-the-expected-output-of-the-api-call-if-you-did-it-correctly">
       This is the expected output of the API call if you did it correctly
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-6-turn-the-json-response-to-a-dataframe">
     Step 6: Turn the JSON response to a DataFrame
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-7-get-the-json-s-features-only">
     Step 7: Get the JSON’s “features” only
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-8-dissect-the-api-call-to-get-a-pattern">
     Step 8: Dissect the API call to get a pattern
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-9">
     Step 9:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-10-generate-a-list-of-datetime-in-proper-format-for-api">
     Step 10: Generate a list of datetime in proper format for API
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-11-make-your-api-calls-for-the-entire-duration-takes-1-2-hours">
     Step 11: Make your API calls for the entire duration (takes 1-2 hours)
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-12-create-a-new-column-time-in-the-new-dataframe">
     Step 12: Create a new column “time” in the new DataFrame
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-13-export-your-dataframe-as-csv">
     Step 13: Export your DataFrame as CSV
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-s-next">
     What’s next?
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="font-color-red-read-this-before-you-start-font">
<h1><font color = "red">[READ THIS] Before you start</font><a class="headerlink" href="#font-color-red-read-this-before-you-start-font" title="Permalink to this headline">¶</a></h1>
<p>Welcome to UpLevel mini-projects! In this series, you’re challenged to independently work (with our guidance) with data that you will collect to UpLevel yourself.</p>
<p>We hope you’re excited to embark on this adventure.</p>
<div class="section" id="warning">
<h2>Warning:<a class="headerlink" href="#warning" title="Permalink to this headline">¶</a></h2>
<p>This isn’t just any coding course or programmes, where you receive helper code as you move from one code block to another.</p>
<p>This is when things get <em>real</em>.</p>
<p>In this project, you will receive instructions to execute a task along with an intended outcome. Most importantly, we will provide you with directions you can go to, to pick up code independently and implement it in this notebook.</p>
<p>Don’t worry though, we’ll be dropping lots of resources you can consult and these readings will contain everything you need to succeed. You can also perform independent research to find answers independently. You just have to read closely and pick out the parts that make most sense.</p>
<p><strong>We make you do this not because we’re lazy bastards but because being able to indepedently find code is a highly underrated skill and that’s something all companies look out for.</strong></p>
<p>If you’re really stuck and are on the verge of giving up, we gotchu fam. Head on over to <a class="reference external" href="https://www.facebook.com/UpLevelSG/">https://www.facebook.com/UpLevelSG/</a> and post your questions there.</p>
</div>
<div class="section" id="what-we-ll-be-doing">
<h2>What we’ll be doing:<a class="headerlink" href="#what-we-ll-be-doing" title="Permalink to this headline">¶</a></h2>
<p>In this project, we will do the following:</p>
<ol class="simple">
<li><p>Call the taxi availability API from <a class="reference external" href="http://Data.gov.sg">Data.gov.sg</a> to collect taxi data (Part I)</p></li>
<li><p>Perform data cleaning (Part II)</p></li>
<li><p>Perform exploratory data analysis (Part III)</p></li>
<li><p>Train a machine learning model to  (Part IV)</p></li>
</ol>
</div>
<div class="section" id="expectations">
<h2>Expectations:<a class="headerlink" href="#expectations" title="Permalink to this headline">¶</a></h2>
<p>We’re not going to sugarcoat it - it’ll be challenging at times. You have to promise to put in the time and effort to UpLevel yourself.</p>
<p>But we promise you that it’ll ultimately be fun and rewarding, and you’ll come out of it stronger and more confident than before.</p>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>In Singapore, all of the taxis are connected to a central system that tracks their positions at all times. It’s even cooler because the Singaporean government collects these data and anyone - including you - can obtain the data for analysis.</p>
<p>We will collect the data for one month in 2019, and perform analysis, followed by modelling.</p>
<p>In this notebook, you will do the following:</p>
<ol class="simple">
<li><p>Import your pandas library</p></li>
<li><p>Call the Taxi Availability API from <a class="reference external" href="http://Data.gov.sg">Data.gov.sg</a></p></li>
<li><p>Organize the JSON data</p></li>
<li><p>Export your DataFrame as a CSV file</p></li>
</ol>
<div class="section" id="step-1-import-the-following-library">
<h2>Step 1: Import the following library<a class="headerlink" href="#step-1-import-the-following-library" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>pandas</p></li>
<li><p>requests</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">nbformat</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>nbformat.read<span class="o">?</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;&lt;script&gt;</span>
<span class="s1">code_show=true; </span>
<span class="s1">function code_toggle() {</span>
<span class="s1"> if (code_show){</span>
<span class="s1"> $(&#39;div.input&#39;).hide();</span>
<span class="s1"> } else {</span>
<span class="s1"> $(&#39;div.input&#39;).show();</span>
<span class="s1"> }</span>
<span class="s1"> code_show = !code_show</span>
<span class="s1">} </span>
<span class="s1">$( document ).ready(code_toggle);</span>
<span class="s1">&lt;/script&gt;</span>
<span class="s1">The raw code for this IPython notebook is by default hidden for easier reading.</span>
<span class="s1">To toggle on/off the raw code, click &lt;a href=&quot;javascript:code_toggle()&quot;&gt;here&lt;/a&gt;.&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script>
code_show=true; 
function code_toggle() {
 if (code_show){
 $('div.input').hide();
 } else {
 $('div.input').show();
 }
 code_show = !code_show
} 
$( document ).ready(code_toggle);
</script>
The raw code for this IPython notebook is by default hidden for easier reading.
To toggle on/off the raw code, click <a href="javascript:code_toggle()">here</a>.</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Step 1: Import the libraries you need</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>
<span class="c1"># from urllib.request import Request, urlopen, urlretrieve</span>
<span class="c1"># from urllib.parse import urlencode, urlparse</span>
<span class="kn">import</span> <span class="nn">json</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="o">~</span>\<span class="n">AppData</span>\<span class="n">Local</span>\<span class="n">Temp</span>\<span class="n">ipykernel_9108</span>\<span class="mf">3978852301.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># Step 1: Import the libraries you need</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="kn">import</span> <span class="nn">requests</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;numpy&#39;
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="step-2-visit-the-api-website">
<h2>Step 2: Visit the API website<a class="headerlink" href="#step-2-visit-the-api-website" title="Permalink to this headline">¶</a></h2>
<p>Head on to <a class="reference external" href="https://data.gov.sg/dataset/taxi-availability">https://data.gov.sg/dataset/taxi-availability</a> to check out the API.</p>
<p>When you load the page (accurate as of Jun 2020), there are a few things to take note of in this page:</p>
<p><img alt="TaxiAvailability.png" src="attachment:TaxiAvailability.png" /></p>
<ol class="simple">
<li><p>The command to use for your API call (more details later)</p></li>
<li><p>The API URL for the latest taxi availability</p></li>
<li><p>A button that lets you try to call the API in the browser</p></li>
</ol>
<p>Notice that there is a “Parameter” section as well, but we’ll come to that later.</p>
</div>
<div class="section" id="step-3-click-on-try-it-out">
<h2>Step 3: Click on “Try it out”<a class="headerlink" href="#step-3-click-on-try-it-out" title="Permalink to this headline">¶</a></h2>
<p>Let’s give the API a spin. In the page, try the following:</p>
<ol class="simple">
<li><p>Click “Try it out”</p></li>
<li><p>Click “Execute”</p></li>
</ol>
<p><img alt="FullAPIExpectation.png" src="attachment:FullAPIExpectation.png" /></p>
<p>The window below expands, exposing three new things:</p>
<ol class="simple">
<li><p>A text box where you can fill in with a string containing time</p></li>
<li><p>A new section, one in particular titled “Request URL”</p></li>
<li><p>The response of the API</p></li>
</ol>
<p>One thing you can also try is entering the “Request URL” in your browser and see what you get!</p>
</div>
<div class="section" id="step-4-add-a-date-into-the-text-box-containing-time">
<h2>Step 4: Add a date into the text box containing time<a class="headerlink" href="#step-4-add-a-date-into-the-text-box-containing-time" title="Permalink to this headline">¶</a></h2>
<p>This is important because currently whenever you execute Step 3, you’re getting the latest taxi availability. However, for this project we’ll be collecting only the entire month of January in 2019.</p>
<p><img alt="TextboxExpectation.png" src="attachment:TextboxExpectation.png" /></p>
<ol class="simple">
<li><p>YYYY = year in four numbers</p></li>
<li><p>MM = zero-padded months, e.g., 01 vs 12 for Jan and Dec respectively</p></li>
<li><p>DD = zero-padded days, e.g., 01 to 31</p></li>
<li><p>HH = hour in 24-hour format, e.g., 00 t0 23</p></li>
<li><p>mm = zero-padded minutes, e.g., 00 t0 59</p></li>
<li><p>ss = zero-padded seconds, e.g., 00 to 59</p></li>
</ol>
<p>Note: The [T] in the middle is telling you to put the string T in between the date and the time.</p>
<p>Once you execute this, we will be using the URL for our API call using Python in Step 5.</p>
</div>
<div class="section" id="step-5-test-with-one-api-call-first-with-requests">
<h2>Step 5: Test with one API call first with requests<a class="headerlink" href="#step-5-test-with-one-api-call-first-with-requests" title="Permalink to this headline">¶</a></h2>
<p>Now that we’ve seen how it’s done on the browser, we will be using Python to make an API call.</p>
<p>If this is the first time you’re making an API call, or you’re unsure on how to make an API call, here’s a handy resource: <a class="reference external" href="https://www.dataquest.io/blog/python-api-tutorial/">https://www.dataquest.io/blog/python-api-tutorial/</a></p>
<p>Here are what you need to do:</p>
<ol class="simple">
<li><p>use requests to get the response of the URL that you found from Step 4</p></li>
<li><p>save the response in a variable</p></li>
<li><p>use .json() to get the JSON data</p></li>
</ol>
<div class="section" id="this-is-the-expected-output-of-the-api-call-if-you-did-it-correctly">
<h3>This is the expected output of the API call if you did it correctly<a class="headerlink" href="#this-is-the-expected-output-of-the-api-call-if-you-did-it-correctly" title="Permalink to this headline">¶</a></h3>
<p><img alt="APICallExpectation.png" src="attachment:APICallExpectation.png" /></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.data.gov.sg/v1/transport/taxi-availability?&#39;</span>
<span class="n">mydict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;date_time&#39;</span><span class="p">:</span> <span class="s1">&#39;2019-01-01T00:00:00&#39;</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">mydict</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="c1"># data</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">json_normalize</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;features&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>type</th>
      <th>geometry.type</th>
      <th>geometry.coordinates</th>
      <th>properties.timestamp</th>
      <th>properties.taxi_count</th>
      <th>properties.api_info.status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.6267, 1.307992], [103.63226, 1.30884], [...</td>
      <td>2018-12-31T23:59:44+08:00</td>
      <td>5887</td>
      <td>healthy</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
</div>
<div class="section" id="step-6-turn-the-json-response-to-a-dataframe">
<h2>Step 6: Turn the JSON response to a DataFrame<a class="headerlink" href="#step-6-turn-the-json-response-to-a-dataframe" title="Permalink to this headline">¶</a></h2>
<p>We’ll practise turning a JSON response into a DataFrame directly first.</p>
<p><img alt="JSONtoDataFrame.png" src="attachment:JSONtoDataFrame.png" /></p>
<p><strong>Hint: Google “turn json response to dataframe”</strong></p>
<p><strong>Hint 2: Pandas has something useful for you</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Step 6: Turn the JSON response directly into a DataFrame</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="step-7-get-the-json-s-features-only">
<h2>Step 7: Get the JSON’s “features” only<a class="headerlink" href="#step-7-get-the-json-s-features-only" title="Permalink to this headline">¶</a></h2>
<p>Wait a minute, where are the coordinates? Turns out we turned the JSON object too directly into a DataFrame. As such, we dig in deeper and get only the values from “features”.</p>
<p>Think of JSON as a huge dictionary, and take only the values from “features”.</p>
<p><img alt="JSONtoDataFrameCorrectExpectation.png" src="attachment:JSONtoDataFrameCorrectExpectation.png" /></p>
<p>This is what you’ll see if you turn only the ‘features’ part of the JSON into a DataFrame!</p>
<p><strong>Hint: Google on ways to get values from dictonaries using keys</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Step 7a: Declare a new variable that contains only your &#39;features&#39; from the JSON</span>

<span class="c1"># Step 7b: Turn it into a DataFrame</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="step-8-dissect-the-api-call-to-get-a-pattern">
<h2>Step 8: Dissect the API call to get a pattern<a class="headerlink" href="#step-8-dissect-the-api-call-to-get-a-pattern" title="Permalink to this headline">¶</a></h2>
<p>Okay, now that we’re successful in turning the JSON into a DataFrame containing one row, we can now proceed with calling the rest of the month of January 2019.</p>
<p>We want to be granular, but not too granular so we will be getting 5-min interval data. For example:</p>
<ol class="simple">
<li><p>Starts at 2019-01-01T00:00:00</p></li>
<li><p>Next one is 2019-01-01T00:05:00</p></li>
<li><p>We go on until 2019-01-31T00:00:00</p></li>
</ol>
<p>Of course, we will have to automate it - it looks so tedious if we did it manually.</p>
<p><img alt="PatternInAPI.png" src="attachment:PatternInAPI.png" /></p>
<p>Do you see a pattern? There are two things to take note of:</p>
<ol class="simple">
<li><p>each request URL has a part of a string that doesn’t change (base URL)</p></li>
<li><p>each request URL has a string that <em>changes</em> (the datetime)</p></li>
</ol>
<p>Also, in the request URL, the hours, minutes, and seconds are separated with a string “%3A”. We will need to take that into account later on.</p>
</div>
<div class="section" id="step-9">
<h2>Step 9:<a class="headerlink" href="#step-9" title="Permalink to this headline">¶</a></h2>
<p>We are going to create a list containing all of the possible combinations of the date and time in 5-min intervals between 2019-01-01 and 2019-01-31.</p>
<p><img alt="DateRangeExpectation.png" src="attachment:DateRangeExpectation.png" /></p>
<p>This is one possible way to do it, as long as you’ve a set of datetimes in 5-minute intervals it’s fine.</p>
<p><strong>Hint: Google “generate interval of dates pandas”</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Step 9: Generate a date range in 5-min intervals</span>
<span class="n">date_range_5m</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2019-01-01&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2019-02-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;5min&#39;</span><span class="p">)</span>
<span class="n">date_range_5m</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DatetimeIndex([&#39;2019-01-01 00:00:00&#39;, &#39;2019-01-01 00:05:00&#39;,
               &#39;2019-01-01 00:10:00&#39;, &#39;2019-01-01 00:15:00&#39;,
               &#39;2019-01-01 00:20:00&#39;, &#39;2019-01-01 00:25:00&#39;,
               &#39;2019-01-01 00:30:00&#39;, &#39;2019-01-01 00:35:00&#39;,
               &#39;2019-01-01 00:40:00&#39;, &#39;2019-01-01 00:45:00&#39;,
               ...
               &#39;2019-01-31 23:15:00&#39;, &#39;2019-01-31 23:20:00&#39;,
               &#39;2019-01-31 23:25:00&#39;, &#39;2019-01-31 23:30:00&#39;,
               &#39;2019-01-31 23:35:00&#39;, &#39;2019-01-31 23:40:00&#39;,
               &#39;2019-01-31 23:45:00&#39;, &#39;2019-01-31 23:50:00&#39;,
               &#39;2019-01-31 23:55:00&#39;, &#39;2019-02-01 00:00:00&#39;],
              dtype=&#39;datetime64[ns]&#39;, length=8929, freq=&#39;5T&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># [list(map(int, row.split()[1:])) for row in text.split(&#39;\n&#39;)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">())</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">date_range_5m</span><span class="p">])</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[&#39;2019-01-01&#39;, &#39;00:00:00&#39;, &#39;2019-01-01&#39;, ..., &#39;2019-01-16&#39;,
        &#39;11:55:00&#39;, &#39;2019-01-16&#39;],
       [&#39;12:00:00&#39;, &#39;2019-01-16&#39;, &#39;12:05:00&#39;, ..., &#39;23:55:00&#39;,
        &#39;2019-02-01&#39;, &#39;00:00:00&#39;]], dtype=&#39;&lt;U10&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tanggal_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">())</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">date_range_5m</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">jam_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">())</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">date_range_5m</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="step-10-generate-a-list-of-datetime-in-proper-format-for-api">
<h2>Step 10: Generate a list of datetime in proper format for API<a class="headerlink" href="#step-10-generate-a-list-of-datetime-in-proper-format-for-api" title="Permalink to this headline">¶</a></h2>
<p>If you noticed in the list, it’s still not quite suitable for using in calling the API.</p>
<p>You’ll need the list to containing the properly formatted date and time string.</p>
<p><img alt="FormattedDatetimeExpectation.png" src="attachment:FormattedDatetimeExpectation.png" /></p>
<p>We will expect something like this. There are a few ways to do this, but here’s a suggestion.</p>
<p><img alt="DateTimeFormatSuggestion.png" src="attachment:DateTimeFormatSuggestion.png" /></p>
<ol class="simple">
<li><p>create a list containing your date, along with a string “T” in it</p></li>
<li><p>create a list containing your hour</p></li>
<li><p>create a list containing your minute</p></li>
<li><p>zip all of this list together with extra strings in the center</p></li>
</ol>
<p>This part is a little tough, but you can do it!</p>
<p><strong>Hint: Google “concatenate two lists element wise python” </strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date_range_string</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="s1">&#39;T&#39;</span><span class="o">+</span><span class="n">j</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">tanggal_list</span><span class="p">,</span><span class="n">jam_list</span><span class="p">)]</span>
<span class="n">date_range_string</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;2019-01-01T00:00:00&#39;,
 &#39;2019-01-01T00:05:00&#39;,
 &#39;2019-01-01T00:10:00&#39;,
 &#39;2019-01-01T00:15:00&#39;,
 &#39;2019-01-01T00:20:00&#39;,
 &#39;2019-01-01T00:25:00&#39;,
 &#39;2019-01-01T00:30:00&#39;,
 &#39;2019-01-01T00:35:00&#39;,
 &#39;2019-01-01T00:40:00&#39;,
 &#39;2019-01-01T00:45:00&#39;]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="step-11-make-your-api-calls-for-the-entire-duration-takes-1-2-hours">
<h2>Step 11: Make your API calls for the entire duration (takes 1-2 hours)<a class="headerlink" href="#step-11-make-your-api-calls-for-the-entire-duration-takes-1-2-hours" title="Permalink to this headline">¶</a></h2>
<p>Let’s make the API calls! This will take a while, around 1-2 hours depending on your Internet speed.</p>
<p>When you run this, make sure you have a bit of time to spare. But ater you’re done with the entire call, it’s just a few more lines to finishing up this Part I.</p>
<p>This is the sequence of events:</p>
<ol class="simple">
<li><p>declare your base URL string</p></li>
<li><p>declare variable containing an empty list</p></li>
<li><p>use a for loop to loop through the list of strings containing dates</p></li>
<li><p>in each loop, combine the base URL string with the date</p></li>
<li><p>perform the API call</p></li>
<li><p>get the response, extract only the feature</p></li>
<li><p>turn that feature into a DataFrame</p></li>
<li><p>append the DataFrame into the list you initialized</p></li>
<li><p>after the entire loop, concatenate all of the DataFrames you have in the list into a combined DataFrame</p></li>
</ol>
<p><img alt="CombinedDataFrameAPIExpectation.png" src="attachment:CombinedDataFrameAPIExpectation.png" /></p>
<p>You’ll see some thing like this.</p>
<p><strong>Hint: String concatenation is your friend</strong></p>
<p><strong>Hint 2: Google “combine dataframe in list pandas”</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.data.gov.sg/v1/transport/taxi-availability?&#39;</span>
<span class="n">df_feature</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">data_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">tanggal</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">date_range_string</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
    <span class="n">mydict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;date_time&#39;</span><span class="p">:</span> <span class="n">tanggal</span><span class="p">}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">mydict</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="n">data_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">json_normalize</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;features&#39;</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|████████████████████████████████████████████████████████████████████████████| 8928/8928 [1:11:18&lt;00:00,  2.09it/s]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_taxi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span>
<span class="n">df_taxi</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>type</th>
      <th>geometry.type</th>
      <th>geometry.coordinates</th>
      <th>properties.timestamp</th>
      <th>properties.taxi_count</th>
      <th>properties.api_info.status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.6267, 1.307992], [103.63226, 1.30884], [...</td>
      <td>2018-12-31T23:59:44+08:00</td>
      <td>5887</td>
      <td>healthy</td>
    </tr>
    <tr>
      <th>0</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.63213, 1.31121], [103.63766, 1.30045], [...</td>
      <td>2019-01-01T00:04:44+08:00</td>
      <td>4001</td>
      <td>healthy</td>
    </tr>
    <tr>
      <th>0</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.63145, 1.31125], [103.6376, 1.300248], [...</td>
      <td>2019-01-01T00:09:44+08:00</td>
      <td>5981</td>
      <td>healthy</td>
    </tr>
    <tr>
      <th>0</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.63132, 1.3216], [103.63314, 1.32474], [1...</td>
      <td>2019-01-01T00:14:45+08:00</td>
      <td>5461</td>
      <td>healthy</td>
    </tr>
    <tr>
      <th>0</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.628, 1.31262], [103.63714, 1.29914], [10...</td>
      <td>2019-01-01T00:19:45+08:00</td>
      <td>5003</td>
      <td>healthy</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_taxi</span> <span class="o">=</span> <span class="n">df_taxi</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;geometry.coordinates&#39;</span><span class="p">:</span><span class="s1">&#39;geometry_coordinates&#39;</span><span class="p">,</span><span class="s1">&#39;geometry.type&#39;</span><span class="p">:</span><span class="s1">&#39;geometry_type&#39;</span><span class="p">,</span><span class="s1">&#39;properties.timestamp&#39;</span><span class="p">:</span><span class="s1">&#39;properties_timestamp&#39;</span><span class="p">,</span><span class="s1">&#39;properties.taxi_count&#39;</span><span class="p">:</span><span class="s1">&#39;properties_taxi_count&#39;</span><span class="p">,</span><span class="s1">&#39;properties.api_info.status&#39;</span><span class="p">:</span><span class="s1">&#39;properties_api_info_status&#39;</span><span class="p">})</span>
<span class="n">df_taxi</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>type</th>
      <th>geometry_type</th>
      <th>geometry_coordinates</th>
      <th>properties_timestamp</th>
      <th>properties_taxi_count</th>
      <th>properties_api_info_status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.6267, 1.307992], [103.63226, 1.30884], [...</td>
      <td>2018-12-31T23:59:44+08:00</td>
      <td>5887</td>
      <td>healthy</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.63213, 1.31121], [103.63766, 1.30045], [...</td>
      <td>2019-01-01T00:04:44+08:00</td>
      <td>4001</td>
      <td>healthy</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.63145, 1.31125], [103.6376, 1.300248], [...</td>
      <td>2019-01-01T00:09:44+08:00</td>
      <td>5981</td>
      <td>healthy</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.63132, 1.3216], [103.63314, 1.32474], [1...</td>
      <td>2019-01-01T00:14:45+08:00</td>
      <td>5461</td>
      <td>healthy</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.628, 1.31262], [103.63714, 1.29914], [10...</td>
      <td>2019-01-01T00:19:45+08:00</td>
      <td>5003</td>
      <td>healthy</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_taxi</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;df_taxi.csv&#39;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># [Use this guide if you&#39;re stuck] Step 11</span>
<span class="c1"># declare the base URL</span>

<span class="c1"># declare the empty list</span>


<span class="c1"># use a for loop in the list you got from Step 10</span>

    <span class="c1"># combine the base_url and the current date in the for loop</span>
    
    <span class="c1"># make a get request using the combined URL</span>
    
    <span class="c1"># get the JSON from the response of the get request</span>
    
    <span class="c1"># declare a variable which contains only the &#39;features&#39; part of the JSON response</span>
    
    <span class="c1"># turn the variable into a DataFrame</span>
    
    <span class="c1"># append the dataframe into the empty list above</span>
    

<span class="c1"># concatenate all of the dataframes you appended into the empty list</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="step-12-create-a-new-column-time-in-the-new-dataframe">
<h2>Step 12: Create a new column “time” in the new DataFrame<a class="headerlink" href="#step-12-create-a-new-column-time-in-the-new-dataframe" title="Permalink to this headline">¶</a></h2>
<p>Well done! Hope that didn’t take long.</p>
<p>Now that we’ve this exciting new DataFrame, we’ll need to do one more thing - create a new column called time containing the date and time. Just use the list that you got from Step 9.</p>
<p><img alt="CombinedDataFrameAPIFinalExpectation.png" src="attachment:CombinedDataFrameAPIFinalExpectation.png" /></p>
<p>A few checks at the end after you’re done:</p>
<ol class="simple">
<li><p>7 columns</p></li>
<li><p>8,641 rows</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date_range_5m</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DatetimeIndex([&#39;2019-01-01 00:00:00&#39;, &#39;2019-01-01 00:05:00&#39;,
               &#39;2019-01-01 00:10:00&#39;, &#39;2019-01-01 00:15:00&#39;,
               &#39;2019-01-01 00:20:00&#39;, &#39;2019-01-01 00:25:00&#39;,
               &#39;2019-01-01 00:30:00&#39;, &#39;2019-01-01 00:35:00&#39;,
               &#39;2019-01-01 00:40:00&#39;, &#39;2019-01-01 00:45:00&#39;,
               ...
               &#39;2019-01-31 23:15:00&#39;, &#39;2019-01-31 23:20:00&#39;,
               &#39;2019-01-31 23:25:00&#39;, &#39;2019-01-31 23:30:00&#39;,
               &#39;2019-01-31 23:35:00&#39;, &#39;2019-01-31 23:40:00&#39;,
               &#39;2019-01-31 23:45:00&#39;, &#39;2019-01-31 23:50:00&#39;,
               &#39;2019-01-31 23:55:00&#39;, &#39;2019-02-01 00:00:00&#39;],
              dtype=&#39;datetime64[ns]&#39;, length=8929, freq=&#39;5T&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_taxi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;df_taxi.csv&#39;</span><span class="p">)</span>
<span class="n">df_taxi</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>type</th>
      <th>geometry_type</th>
      <th>geometry_coordinates</th>
      <th>properties_timestamp</th>
      <th>properties_taxi_count</th>
      <th>properties_api_info_status</th>
      <th>time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.6267, 1.307992], [103.63226, 1.30884], [...</td>
      <td>2018-12-31T23:59:44+08:00</td>
      <td>5887</td>
      <td>healthy</td>
      <td>2019-02-01</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.63213, 1.31121], [103.63766, 1.30045], [...</td>
      <td>2019-01-01T00:04:44+08:00</td>
      <td>4001</td>
      <td>healthy</td>
      <td>2019-02-01</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.63145, 1.31125], [103.6376, 1.300248], [...</td>
      <td>2019-01-01T00:09:44+08:00</td>
      <td>5981</td>
      <td>healthy</td>
      <td>2019-02-01</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.63132, 1.3216], [103.63314, 1.32474], [1...</td>
      <td>2019-01-01T00:14:45+08:00</td>
      <td>5461</td>
      <td>healthy</td>
      <td>2019-02-01</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.628, 1.31262], [103.63714, 1.29914], [10...</td>
      <td>2019-01-01T00:19:45+08:00</td>
      <td>5003</td>
      <td>healthy</td>
      <td>2019-02-01</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Step 12: create the &#39;time&#39; column and assign it with the list from Step 9</span>
<span class="n">df_taxi</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">date_range_5m</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">df_taxi</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>type</th>
      <th>geometry_type</th>
      <th>geometry_coordinates</th>
      <th>properties_timestamp</th>
      <th>properties_taxi_count</th>
      <th>properties_api_info_status</th>
      <th>time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.6267, 1.307992], [103.63226, 1.30884], [...</td>
      <td>2018-12-31T23:59:44+08:00</td>
      <td>5887</td>
      <td>healthy</td>
      <td>2019-01-01 00:00:00</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.63213, 1.31121], [103.63766, 1.30045], [...</td>
      <td>2019-01-01T00:04:44+08:00</td>
      <td>4001</td>
      <td>healthy</td>
      <td>2019-01-01 00:05:00</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.63145, 1.31125], [103.6376, 1.300248], [...</td>
      <td>2019-01-01T00:09:44+08:00</td>
      <td>5981</td>
      <td>healthy</td>
      <td>2019-01-01 00:10:00</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.63132, 1.3216], [103.63314, 1.32474], [1...</td>
      <td>2019-01-01T00:14:45+08:00</td>
      <td>5461</td>
      <td>healthy</td>
      <td>2019-01-01 00:15:00</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Feature</td>
      <td>MultiPoint</td>
      <td>[[103.628, 1.31262], [103.63714, 1.29914], [10...</td>
      <td>2019-01-01T00:19:45+08:00</td>
      <td>5003</td>
      <td>healthy</td>
      <td>2019-01-01 00:20:00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_taxi</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;2019-02-01&#39;
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="step-13-export-your-dataframe-as-csv">
<h2>Step 13: Export your DataFrame as CSV<a class="headerlink" href="#step-13-export-your-dataframe-as-csv" title="Permalink to this headline">¶</a></h2>
<p>Congrats and very well done! It was tough but you perservered and did it.</p>
<p>You’ve successfully called an API and collected your own data. Now it’s time to export your DataFrame into a CSV format so that you can continue in Part II.</p>
<p>We don’t need the index to be exported so don’t forget the additional argument.</p>
<p><strong>Hint: Google “export dataframe to csv”</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Step 13: Export your DataFrame to CSV</span>
<span class="n">df_taxi</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;df_taxi.csv&#39;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="what-s-next">
<h2>What’s next?<a class="headerlink" href="#what-s-next" title="Permalink to this headline">¶</a></h2>
<p>Head on to Part II for the next part of your adventure!</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Azka Nur Afifah<br/>
    
      <div class="extra_footer">
        <p>
Icon by <a href="https://twitter.com/minumtehtarik">@minumtehtarik</a>
</p>

      </div>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>